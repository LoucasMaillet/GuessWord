<html><head> <meta charset="UTF-8"> <title>GuessWord</title> <link rel="icon" href="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' style='fill: %23fff'%3E%3Cpath d='M19 2.01H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.998 5 19.815 5 19.01c0-.101.009-.191.024-.273.112-.575.583-.717.987-.727H20c.018 0 .031-.009.049-.01H21V4.01c0-1.103-.897-2-2-2zm0 14H5v-11c0-.806.55-.988 1-1h7v7l2-1 2 1v-7h2v12z'%3E%3C/path%3E%3C/svg%3E" /> <style>@font-face { font-family: 'Ubuntu'; font-style: normal; font-weight: 300; font-display: swap; src: url("/home/lucas-maillet/Documents/Projets/Web/dad/GuessWord/other/ubuntu.ttf") format('woff2');}* { text-align: center; -c-back: #101218; --c-1: #fff; --c-1-h: #ffffff31; --c-red: #e73535; --c-green: #35e761; font-family: Ubuntu, sans-serif;}body { margin: 0; display: grid; background-size: cover; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.com/svgjs' preserveAspectRatio='none' viewBox='0 0 1920 1080'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1058%26quot%3b)' fill='none'%3e%3crect width='1920' height='1080' x='0' y='0' fill='rgba(16%2c 18%2c 24%2c 1)'%3e%3c/rect%3e%3cpath d='M0%2c854.105C168.276%2c883.251%2c350.215%2c860.813%2c494.877%2c770.044C640.158%2c678.887%2c727.232%2c520.238%2c787.819%2c359.785C845.646%2c206.641%2c870.742%2c39.294%2c830.746%2c-119.443C792.788%2c-270.089%2c670.19%2c-375.264%2c572.229%2c-495.84C470.724%2c-620.777%2c391.734%2c-769.814%2c246.297%2c-838.812C89.287%2c-913.3%2c-106.002%2c-968.555%2c-261.768%2c-891.501C-417.116%2c-814.654%2c-432.484%2c-601.865%2c-526.728%2c-456.412C-604.753%2c-335.991%2c-746.691%2c-252.321%2c-767.869%2c-110.403C-789.073%2c31.694%2c-703.858%2c163.659%2c-638.338%2c291.519C-575.504%2c414.138%2c-499.109%2c524.689%2c-395.743%2c615.788C-277.831%2c719.707%2c-154.864%2c827.282%2c0%2c854.105' fill='%230a0c10'%3e%3c/path%3e%3cpath d='M1920 1969.501C2083.511 1950.914 2173.077 1774.6950000000002 2296.502 1665.848 2399.425 1575.0819999999999 2510.445 1498.995 2584.516 1383.474 2667.7619999999997 1253.644 2760.763 1114.616 2748.525 960.876 2736.076 804.491 2609.511 689.094 2519.0389999999998 560.929 2418.0860000000002 417.91600000000005 2348.324 237.46000000000004 2188.094 166.957 2022.364 94.03399999999999 1824.636 115.05399999999997 1656.096 181.22400000000005 1494.56 244.64499999999998 1392.8220000000001 393.576 1278.4470000000001 524.092 1163.403 655.371 977.1 771.4100000000001 986.135 945.73 995.429 1125.062 1227.5810000000001 1200.26 1321.4270000000001 1353.359 1399.005 1479.9180000000001 1380.717 1651.717 1484.154 1758.19 1598.984 1876.3899999999999 1756.26 1988.114 1920 1969.501' fill='%23161820'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1058'%3e%3crect width='1920' height='1080' fill='white'%3e%3c/rect%3e%3c/mask%3e%3c/defs%3e%3c/svg%3e"); color: var(-c-back);}input { display: none;}.box { display: grid; min-height: calc(100vh - 4em); max-height: max-content; margin: 2em; justify-content: center; align-items: center;}#event { font-size: x-large; margin: auto; border-radius: 1em; overflow: hidden; min-width: 3vw; max-width: max-content; position: relative;}#event p { margin: .5em; transition: all .1s ease-in-out;}#event p:before { background: var(--c-1); content: ""; inset: 0; z-index: -1; position: absolute;}#event iframe, #event video { margin: 0; overflow: hidden; width: 560; height: 315;}#output { margin: 2em; max-width: 80vw;}#output word { display: inline-block; width: max-content; height: max-content; background-color: var(--c-1); border-radius: 1em; padding: .5em; max-width: 80vw; word-wrap: break-word; margin: .4em;}.bottom { display: flex; flex-direction: column; align-items: center;}.ico svg { width: 1em; padding: .25em; fill: var(--c-1); border-radius: 1em;}.ico svg:hover { background: var(--c-1-h);}#input { border-radius: 1em; background-color: var(--c-green); color: var(-c-back); padding: .5em; max-width: 90vw; max-height: 10vh; min-width: 8em; width: max-content; word-wrap: break-word; break-after: right; overflow-y: scroll; scrollbar-width: none;}#input:empty::after { content: attr(data-placeholder);}</style></head><body> <div class="box"> <div id="event"> <p>GuessWord 0.5</p> </div> <p id="output"></p> <div class="bottom"> <div class="ico"> <svg onclick="macro.show()" viewBox="0 0 24 24"> <path d="M14 12c-1.095 0-2-.905-2-2 0-.354.103-.683.268-.973C12.178 9.02 12.092 9 12 9a3.02 3.02 0 0 0-3 3c0 1.642 1.358 3 3 3 1.641 0 3-1.358 3-3 0-.092-.02-.178-.027-.268-.29.165-.619.268-.973.268z"> </path> <path d="M12 5c-7.633 0-9.927 6.617-9.948 6.684L1.946 12l.105.316C2.073 12.383 4.367 19 12 19s9.927-6.617 9.948-6.684l.106-.316-.105-.316C21.927 11.617 19.633 5 12 5zm0 12c-5.351 0-7.424-3.846-7.926-5C4.578 10.842 6.652 7 12 7c5.351 0 7.424 3.846 7.926 5-.504 1.158-2.578 5-7.926 5z"> </path> </svg> <svg onclick="macro.reset()" viewBox="0 0 24 24"> <path d="M12 16c1.671 0 3-1.331 3-3s-1.329-3-3-3-3 1.331-3 3 1.329 3 3 3z"></path> <path d="M20.817 11.186a8.94 8.94 0 0 0-1.355-3.219 9.053 9.053 0 0 0-2.43-2.43 8.95 8.95 0 0 0-3.219-1.355 9.028 9.028 0 0 0-1.838-.18V2L8 5l3.975 3V6.002c.484-.002.968.044 1.435.14a6.961 6.961 0 0 1 2.502 1.053 7.005 7.005 0 0 1 1.892 1.892A6.967 6.967 0 0 1 19 13a7.032 7.032 0 0 1-.55 2.725 7.11 7.11 0 0 1-.644 1.188 7.2 7.2 0 0 1-.858 1.039 7.028 7.028 0 0 1-3.536 1.907 7.13 7.13 0 0 1-2.822 0 6.961 6.961 0 0 1-2.503-1.054 7.002 7.002 0 0 1-1.89-1.89A6.996 6.996 0 0 1 5 13H3a9.02 9.02 0 0 0 1.539 5.034 9.096 9.096 0 0 0 2.428 2.428A8.95 8.95 0 0 0 12 22a9.09 9.09 0 0 0 1.814-.183 9.014 9.014 0 0 0 3.218-1.355 8.886 8.886 0 0 0 1.331-1.099 9.228 9.228 0 0 0 1.1-1.332A8.952 8.952 0 0 0 21 13a9.09 9.09 0 0 0-.183-1.814z"> </path> </svg> <svg onclick="(async()=>{genString(await macro.file())})()" viewBox="0 0 24 24"> <path d="M19.903 8.586a.997.997 0 0 0-.196-.293l-6-6a.997.997 0 0 0-.293-.196c-.03-.014-.062-.022-.094-.033a.991.991 0 0 0-.259-.051C13.04 2.011 13.021 2 13 2H6c-1.103 0-2 .897-2 2v16c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V9c0-.021-.011-.04-.013-.062a.952.952 0 0 0-.051-.259c-.01-.032-.019-.063-.033-.093zM16.586 8H14V5.414L16.586 8zM6 20V4h6v5a1 1 0 0 0 1 1h5l.002 10H6z"> </path> <path d="M8 12h8v2H8zm0 4h8v2H8zm0-8h2v2H8z"></path> </svg> <svg onclick="save()" viewBox="0 0 24 24"> <path d="M5 21h14a2 2 0 0 0 2-2V8a1 1 0 0 0-.29-.71l-4-4A1 1 0 0 0 16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zm10-2H9v-5h6zM13 7h-2V5h2zM5 5h2v4h8V5h.59L19 8.41V19h-2v-5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v5H5z"> </path> </svg> <svg onclick="help()" viewBox="0 0 24 24"> <path d="M12 6a3.939 3.939 0 0 0-3.934 3.934h2C10.066 8.867 10.934 8 12 8s1.934.867 1.934 1.934c0 .598-.481 1.032-1.216 1.626a9.208 9.208 0 0 0-.691.599c-.998.997-1.027 2.056-1.027 2.174V15h2l-.001-.633c.001-.016.033-.386.441-.793.15-.15.339-.3.535-.458.779-.631 1.958-1.584 1.958-3.182A3.937 3.937 0 0 0 12 6zm-1 10h2v2h-2z"> </path> <path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"> </path> </svg> </div> <p id="input" min-length="2" data-placeholder="Write here" contenteditable></p> </div> </div> <script>var input = document.getElementById("input");var output = document.getElementById("output");var event = document.getElementById("event");var saveText = [];var saveMacro = [];var showState = false;var wordRegex = /./g;var wordCaracter = "X ";var chrono;String.prototype.remove = function () { res = this; Object.values(arguments).forEach((c) => { res = res.replace(c, "") }); return res};var macro = { file: async () => { open = document.createElement("input"); open.type = "file"; return await new Promise((resolve, reject) => { open.addEventListener("change", () => { file = open.files[0]; if (/text/.test(file.type)) { var reader = new FileReader(); reader.onload = () => { resolve(reader.result); }; reader.onerror = reject; reader.readAsText(file, "UTF-8"); } else { alert("File type invalid."); } }); open.click(); }); }, show: () => { if (!showState) { output.querySelectorAll("word").forEach((el) => { if (el.innerHTML != el.dataset.word) { saveText[el.dataset.index] = `${saveText[el.dataset.index][0]}ð${saveText[el.dataset.index].slice(1)}`; el.innerHTML = el.dataset.word; } }); showState = true; } else { output.querySelectorAll("word").forEach((el) => { if (el.innerHTML == el.dataset.word) { saveText[el.dataset.index] = saveText[el.dataset.index].replace("ð", ""); el.innerHTML = el.dataset.hideWord; } }); showState = false; } }, video: (path) => { event.innerHTML = `<video controls src="${path}"></video>`; }, videoYt: (url) => { url = url.match(/^.*(youtube\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)[2]; if (url) { event.innerHTML = ` <iframe src="https://www.youtube.com/embed/${url}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`; } else { event.innerHTM = "<p>Error: Bad url</p>" } }, transfrom: (regex, caracter) => { wordRegex = new RegExp(rgx, "g"); wordCaracter = caracter; }, reset: () => { clearTimeout(chrono); event.macro = ""; event.innerHTML = "<p>Guess word v0.4</p>"; event.style.color = "var(--c-back)"; wordRegex = /[^\d.-]/g; wordCaracter = "X "; }, chrono: (min = 1, sec = 0) => { delay = parseFloat(min) * 60 + parseFloat(sec); count = delay; clearTimeout(chrono); chrono = setInterval(() => { event.style.display = "block"; event.innerHTML = `<p>${`${Math.floor(count / 60)}:`.padStart(3, "0")}${`${count % 60}`.padStart(2, "0")}</p>`; if (count == 0) { event.innerHTML = "<p>Time's up !</p>"; setTimeout(() => { event.innerHTML = "<p>Guess word v0.4</p>"; event.style.color = "var(-c-back)"; }, 3000); clearTimeout(chrono); } else if (count <= 5) { event.style.color = "var(--c-red)"; } count--; }, 1000); }, helloThere: (text = "Hello there!", desc = "General Kenobi") => { console.log(`%s%c - ${desc} %s%c`, `${text}`, "font-style: italic"); return `${text}\n"${desc.italics()}"` }};function help() { output.innerHTML = `<word style="text-align:left"> <strong>GuessWord (0.5)</strong><br> <br> â¢ Write multiple words in one cell with "Hello world!"<br> â¢ Call functions with '$function' or '$function(arg0,arg1)'<br> â¢ Write commentary with '<i># your comment</i> '<br> â¢ Use <kbd>Ctrl</kbd> + <kbd>Maj</kbd> + <kbd>i</kbd> to search and understand the code<br> <br> â¢ Availables functions :<br> &emsp;â¢ $${Object.keys(macro).sort().join(",<br>&emsp;â¢ $")} <br> <br> <i>Credits to Lucas Maillet, idea from his father</i> </word>`;}function save() { fileSaver = document.createElement("a"); fileSaver.download = `${new Date().toLocaleDateString('fr-FR', { hour12: false }).replace(/(\/)/g, "-")}.gw`; fileSaver.href = `data:text/plain;charset=utf-8, ${encodeURIComponent(saveMacro.join(" ") + saveText.join(" "))}`; fileSaver.click();}function wordClick(el) { if (el.innerHTML != el.dataset.word) { saveText[el.dataset.index] = `${saveText[el.dataset.index][0]}ð${saveText[el.dataset.index].slice(1)}`; el.innerHTML = el.dataset.word; } else { saveText[el.dataset.index] = saveText[el.dataset.index].replace("ð", ""); el.innerHTML = el.dataset.hideWord; }}async function gen(text) { saveText = []; index = 0; text.split(/\n/g).forEach((line) => { words = line.match(/([^\s"]+|"[^"]*")/g); if (words) { words.forEach((word) => { wordHtml = document.createElement("word"); wordHtml.title = `length : ${word.length}`; wordHtml.dataset.index = index; wordHtml.dataset.word = word.remove(/\"/g, "ð"); wordHtml.dataset.hideWord = word.remove(/\"/g).replace(wordRegex, wordCaracter); wordHtml.setAttribute("onclick", `wordClick(this)`); if (word.includes("$")) { for (mrc in macro) { if (text.includes(`$${mrc}`)) { arg = text.split(`$${mrc}(`); if (arg[1]) { arg = arg[1].split(")")[0]; res = macro[mrc](...arg.split(",")); mcrStr = `${mrc}(${arg})`; } else { res = macro[mrc](); mcrStr = mrc; } if (res) { saveMacro.push(`$${mrc}`); gen(res); console.log("e") } } } } else { if (word.includes("ð")) { wordHtml.innerHTML = wordHtml.dataset.word; } else { wordHtml.innerHTML = wordHtml.dataset.hideWord; } output.appendChild(wordHtml); saveText.push(word); index++; } }); output.innerHTML += "<br>"; saveText.push("\n"); index++; } })}async function setMACRO(text) { return text;}async function genString(text) { try { text = await setMACRO(text); if (text.toLowerCase() != text.toUpperCase()) { output.innerHTML = ""; await gen(text); } } catch (err) { output.innerHTML = `<word>${err}</word>`; }}input.addEventListener("keydown", async (event) => { if (event.keyCode == 13 && !event.shiftKey) { genString(input.innerText); input.innerText = ""; }});gen(`Hello there,\nthat $video(ee) sentence $helloThere is an exemple,\nby the way, look at the help\n"(click help)."`);</script></body></html>